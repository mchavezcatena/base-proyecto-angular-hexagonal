<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-brand" routerLink="/home">
      <h2>Sistema de GestiÃ³n</h2>
    </div>

    <!-- Hamburger Menu Button -->
    <button class="hamburger-menu"
            (click)="toggleMobileMenu()"
            [class.active]="isMobileMenuOpen()"
            aria-label="Toggle navigation menu">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Desktop Menu -->
    <div class="navbar-menu desktop-menu">
     @if(currentSession()){
      <div class="navbar-nav" >
        <a routerLink="/home" routerLinkActive="active" class="nav-link">Inicio</a>
        <a routerLink="/users" routerLinkActive="active" class="nav-link">Usuarios</a>
        <a routerLink="/roles" routerLinkActive="active" class="nav-link">Roles</a>
        <a routerLink="/assign-roles" routerLinkActive="active" class="nav-link">Asignar Roles</a>
      </div>
     }

      <div class="navbar-actions">
        <!-- Theme Toggle -->
        <button class="theme-toggle-btn"
                (click)="toggleTheme()"
                [title]="themeLabel()"
                aria-label="Cambiar tema">
          <span class="theme-icon">{{ themeIcon() }}</span>
        </button>
        @if (currentSession()) {
          <div class="user-menu">
            <span class="user-email">{{ currentSession()!.email.value }}</span>
            <button class="btn btn-outline" (click)="logout()">Cerrar SesiÃ³n</button>
          </div>
        } @else {
          <button class="btn btn-primary" routerLink="/login">Iniciar SesiÃ³n</button>
        }
      </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay"
         [class.active]="isMobileMenuOpen()"
         (click)="closeMobileMenu()">
    </div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" [class.active]="isMobileMenuOpen()">
      <div class="mobile-menu-header">
        <h3>MenÃº</h3>
        <button class="close-button" (click)="closeMobileMenu()" aria-label="Close menu">
          <span>âœ•</span>
        </button>
      </div>

      <div class="mobile-menu-content">
        <!-- User Info -->
        @if (currentSession()) {
          <div class="mobile-user-info">
            <div class="mobile-user-avatar">
              <span>{{ currentSession()!.email.value.charAt(0).toUpperCase() }}</span>
            </div>
            <div class="mobile-user-details">
              <span class="mobile-user-email">{{ currentSession()!.email.value }}</span>
              <span class="mobile-user-status">Conectado</span>
            </div>
          </div>
        }

        <!-- Navigation Links -->
        @if (currentSession()) {
          <div class="mobile-nav">
            <a routerLink="/home"
               routerLinkActive="active"
               class="mobile-nav-link"
               (click)="closeMobileMenu()">
              <span class="nav-icon">ğŸ </span>
              Inicio
            </a>
            <a routerLink="/users"
               routerLinkActive="active"
               class="mobile-nav-link"
               (click)="closeMobileMenu()">
              <span class="nav-icon">ğŸ‘¥</span>
              Usuarios
            </a>
            <a routerLink="/roles"
               routerLinkActive="active"
               class="mobile-nav-link"
               (click)="closeMobileMenu()">
              <span class="nav-icon">ğŸ”</span>
              Roles
            </a>
            <a routerLink="/assign-roles"
               routerLinkActive="active"
               class="mobile-nav-link"
               (click)="closeMobileMenu()">
              <span class="nav-icon">ğŸ¯</span>
              Asignar Roles
            </a>
          </div>
        }

        <!-- Mobile Actions -->
        <div class="mobile-actions">
          <!-- Mobile Theme Toggle -->
          <button class="mobile-theme-btn" (click)="toggleTheme()">
            <span class="btn-icon">{{ themeIcon() }}</span>
            {{ themeLabel() }}
          </button>

          @if (currentSession()) {
            <button class="mobile-logout-btn" (click)="logout(); closeMobileMenu()">
              <span class="btn-icon">ğŸšª</span>
              Cerrar SesiÃ³n
            </button>
          } @else {
            <button class="mobile-login-btn" routerLink="/login" (click)="closeMobileMenu()">
              <span class="btn-icon">ğŸ”‘</span>
              Iniciar SesiÃ³n
            </button>
          }
        </div>
      </div>
    </div>
  </div>
</nav>
